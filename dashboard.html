<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Boxicons -->
	<link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
	<!-- My CSS -->
	<link rel="stylesheet" href="styles/dashboardStyle.css">

	<title>Admin Dashboard</title>
</head>
<body>


	<!-- SIDEBAR -->
	<section id="sidebar">
		<a href="#" class="brand">
			<i class='bx bxs-smile'></i>
			<span class="text">Admin Dashboard</span>
		</a>
		<ul class="side-menu top">
			<li class="active">
				<a href="#">
					<i class='bx bxs-dashboard' ></i>
					<span class="text">Dashboard</span>
				</a>
			</li>
		<li>
  <a href="javascript:void(0);" class="logout">
    <i class='bx bxs-log-out-circle'></i>
    <span class="text" id="signOutBtn">Logout</span>
  </a>
</li>

		</ul>
	</section>
  
	<!-- SIDEBAR -->

	<!-- CONTENT -->
	<section id="content">
		<!-- NAVBAR -->
		<nav>
			<i class='bx bx-menu' ></i>
			<a href="#" class="nav-link">Categories</a>
			<form action="#">
  <div class="form-input">
    <input type="search" id="searchInput" placeholder="Search...">
    <button type="submit" class="search-btn"><i class='bx bx-search' ></i></button>
  </div>
</form>

			<input type="checkbox" id="switch-mode" hidden>
			<label for="switch-mode" class="switch-mode"></label>
		</nav>
		<!-- NAVBAR -->

		<!-- MAIN -->
		<main>
			<div class="head-title">
				<div class="left">
					<h1>Dashboard</h1>
					<ul class="breadcrumb">
						<li>
							<a href="#">Dashboard</a>
						</li>
						<li><i class='bx bx-chevron-right' ></i></li>
						<li>
							<a class="active" href="#">Home</a>
						</li>
					</ul>
				</div>
			</div>

			<ul class="box-info">
				<li>
					<i class='bx bxs-calendar-check' ></i>
					<span class="text">
  <h3 id="userCount">0</h3>
  <p>User Login</p>
</span>

				</li>
			</ul>


			<div class="table-data">
				<div class="order">
					<div class="head">
						<h3>Recent Login</h3>
					</div>
					<table>
						<thead>
							<tr>
								<th>User</th>
								<th>Contact Number</th>
								<th>Login Date & Time</th>
							</tr>
						</thead>
						<tbody>

            </tbody>
					</table>
				</div>
			</div>
		</main>
		<!-- MAIN -->
	</section>
	<!-- CONTENT -->
	

	<script src="js/dashboard.js"></script>
  <script  type="module" src="js/data.js"></script>
   <script  type="module" src="js/logout.js"></script>
   <script type="module" src="js/search.js"></script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const searchInput = document.getElementById("searchInput");

  searchInput.addEventListener("input", () => {
    searchUsers(searchInput.value).then(users => {
      renderTable(users);
    });
  });

  // optionally load initial top 3
  searchUsers("").then(users => {
    renderTable(users);
  });
});
</script>

<script>
// Include renderTable here or in another JS file
function renderTable(users) {
  const tbody = document.querySelector("table tbody");
  tbody.innerHTML = "";

  if (!users.length) {
    tbody.innerHTML = `<tr><td colspan="3" style="text-align:center">No users found.</td></tr>`;
    return;
  }

  users.forEach(user => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>
        <img src="${user.photo || ""}" alt="${user.nameAsPerAadhaar || "User"}"
             style="width:40px;height:40px;border-radius:50%;object-fit:cover;margin-right:10px;vertical-align:middle;">
        <p style="display:inline-block;vertical-align:middle;">${user.nameAsPerAadhaar || "Unknown"}</p>
      </td>
      <td>${user.contactNumber || "Null"}</td>
      <td>${user.submittedAt || "N/A"}</td>
    `;
    tbody.appendChild(tr);
  });
}
</script>

</body>
</html>